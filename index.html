<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AR Sphere</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://cdn.rawgit.com/jeromeetienne/AR.js/2.0.8/aframe/build/aframe-ar.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
</head>
<body style="margin: 0; overflow: hidden;">
    <a-scene embedded arjs="sourceType: webcam; debugUIEnabled: false;">
        <!-- Creating a custom camera control -->
        <a-camera id="custom-camera" gps-camera rotation-reader></a-camera>
        
        <!-- Placing the AR Sphere -->
        <a-sphere id="ar-sphere" radius="0.1" color="red"></a-sphere>

        <!-- Lighting -->
        <a-light type="ambient" intensity="0.5"></a-light>
        <a-light type="point" intensity="0.5" position="2 4 0"></a-light>
    </a-scene>

    <script>
        // Set initial position of the sphere at (0,0,0)
        const initialPosition = { x: 0, y: 0, z: 0 };
        const arSphere = document.querySelector('#ar-sphere');
        arSphere.setAttribute('position', `${initialPosition.x} ${initialPosition.y} ${initialPosition.z}`);

        // Set up custom camera control to update position based on camera tracking
        const customCamera = document.querySelector('#custom-camera');
        customCamera.addEventListener('loaded', () => {
            customCamera.components['gps-camera'].data['fakeGPS'] = true;
        });

        customCamera.addEventListener('gps-camera-update-position', (e) => {
            const position = e.detail.position;
            arSphere.setAttribute('position', `${position.x} ${position.y} ${position.z}`);
        });
    </script>
</body>
</html>
