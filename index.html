<!DOCTYPE html>
<html>
  <head>
    <title>AR.js Camera Position Example</title>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
  </head>
  <body>
    <a-scene embedded arjs>
      <a-camera>
        <a-entity
          position="0 0 -1"
          text="value: Starting Position; align: center;"
        ></a-entity>
      </a-camera>

      <a-box
        id="cameraPositionDisplay"
        color="green"
        depth="0.1"
        height="0.1"
        width="0.1"
      ></a-box>

      <script>
        let startingPosition = new THREE.Vector3();
        let cameraPositionDisplay;

        AFRAME.registerComponent("camera-position-display", {
          init: function () {
            cameraPositionDisplay = document.getElementById(
              "cameraPositionDisplay"
            );
          },

          tick: function () {
            let cameraPosition = this.el.sceneEl.camera.el.object3D.position;
            let offset = cameraPosition.clone().sub(startingPosition);

            cameraPositionDisplay.setAttribute("position", {
              x: offset.x,
              y: offset.y,
              z: offset.z,
            });
          },
        });

        window.addEventListener("camera-init", () => {
          startingPosition = AFRAME.scenes[0].camera.el.object3D.position.clone();
        });

        // Continuously update the camera position display
        setInterval(() => {
          AFRAME.scenes[0].camera.el.components["camera-position-display"].tick();
        }, 50); // Update every 50 milliseconds
      </script>
    </a-scene>
  </body>
</html>
